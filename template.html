<!-- CSS -->
<style>
    /* Set text defaults */
    * {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
    }

    b {
        color: #ec2626;
    }

    /* Update Button */
    #update {
        border-radius: .78125vw;
        min-height: 1.171875vw;
        min-width: 5.859375vw;
        background-color: #fcba03;
        border-color: #c0b7b7;
        color: #fff;
        font-size: 1.25vw;
    }

    #main-body {
        display: table;
    }

    .left {
        display: table-cell;
        width: 35%;
        padding-right: .3125vw;
    }

    .right {
        display: table-cell;
        width: 65%;
        padding-left: .3125vw;
        font-size: 1.25vw;
    }

    .header {
        text-align: center;
        height: auto;
        line-height: 4.6875vw;
        background-color: #1182f3;
        border-radius: 1.953125vw;
        color: #ffffff;
        font-size: 1.2vw;
        padding-top: .390625vw;
        padding-bottom: .390625vw;
        padding-left: 1.40625vw;
        padding-right: 1.40625vw;
        line-height: 2.734375vw;
        font-size: 2.34375vw;
    }

    .date-place {
        padding-left: 1.5625vw;
        padding-top: .625vw;
        font-size: 1.25vw;
    }

    .summary {
        padding-left: 1.5625vw;
        padding-top: 1.5625vw;
        font-size: 1.25vw;
    }

    .awards {
        padding: 1.5625vw;
        font-size: 1.25vw;
    }

    /* Table */
    table {
        width: 100%;
        border-collapse: collapse;
    }

    .top-row {
        background-color: #f8f2a2;
    }

    th {
        border: .234375vw solid #8a8a8a;
        text-align: left;
        padding: .625vw;
    }

    /* Blue Alliance */
    .blue {
        background-color: #ddf;
    }

    .blue-score {
        color: rgb(112, 112, 252)
    }

    /* Red Alliance */
    .red {
        background-color: #fdd;
    }

    .red-score {
        color: rgb(253, 106, 106);
    }

</style>

<!-- HTML -->
<button id="update" onclick="update()">Update</button>
<p><span id="time"></span><i>Live updates provided by the Blue Alliance</i></p>
<div id="main-body">
    <div class="left">
        <div class="header">
            <strong>San Diego Regional presented by Qualcomm</strong>
        </div>
        <div class="date-place">
            &#128205; San Diego, California<br>&#128198; Week 4 | March 23 to March 25, 2023
        </div>
        <div class="summary">
            Team 2102 was <b>Rank 8</b> with a record of <b>8-5-0</b>
        </div>
        <div class="awards">
            <strong>Awards:</strong>
            <table>
                    <th>
                        - FIRST Impact Award
                    </th>
                </tr>
            </table>
        </div>
    </div>

    <div class="right">
        <table>
            <tr>
                <th class="top-row">Match</th>
                <th class="top-row">W/L</th>
                <th class="blue" colspan="3">Blue Alliance</th>
                <th class="red" colspan="3">Red Alliance</th>
                <th class="top-row">Score</th>
                <th class="top-row">▶️</th>
            </tr>
            <tr>
                <th>Qual 1</th>
                <th>W</th>
                <th class="blue">2102</th>
                <th class="blue">3128</th>
                <th class="blue">1622</th>
                <th class="red">1678</th>
                <th class="red">973</th>
                <th class="red">254</th>
                <th>
                    <span class="blue-score">200</span>
                    -
                    <span class="red-score">31</span>
                </th>
                <th>▶️</th>
            </tr>
        </table>
    </div>
</div>

<!-- Use AJAX via Google CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

<!-- JavaScript -->
<script>
    // GET retrieves the data
    // LOAD loads date onto the website

    /*
    Functions:
    update() - Update main body
    getTBA() - Connects to the Blue Alliance
    getEventStatus()
    getEventNames()
    */

    // Run when site loads
    update();




    // Functions

    function getTBA(dir) {
        var info;
        $.ajax({
            url: "https://www.thebluealliance.com/api/v3/" + dir,
            headers: {
                "X-TBA-Auth-Key": 'dsU1LGZffn1dcsuBt5E3XwWkL2hmCLUJrhsJiKczMZUCBpdpguEz4Psbh4Dd5RHR'
            },
            async: false,
            success: function(result){info = result;}
        });
        return info;
    }

    function getEventStatuses() {
        return getTBA("team/frc2102/events/2023/statuses");
    }

    function getEvents() {
        return getTBA("team/frc2102/events/2023");
    }

    function getEventKeys() {
        return getTBA("/team/frc2102/events/keys");
    }

    function getEvent(key) {
        return getTBA("/event/"+key);
    }

    function getSummary(key) {
        return getEventStatuses()[key]["overall_status_str"];
    }

    function getAwards(key) {
        return getTBA("/team/frc2102/event/2023casd/awards");
    }

    function getEventName(key) {
        return names;
    }

    function getTime() {
        var time = new Date();
        var hour = time.getHours();
        var min = time.getMinutes();
        var colon = ":";
        if (min.length == 1) {
            colon += "0";
        }
        if (hour == "0") {
            hour = "00";
        }
        return "Last updated " + hour + colon + min + "<br>";

    }

    function update() {
        
        document.getElementById("time").innerHTML = getTime();
        console.log(getAwards("2023casd"));
    }
</script>
